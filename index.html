<!doctype>
<html>

<head>

	<!-- Place this data between the <head> tags of your website -->
	<title>秘密门</title>
	<meta name="description" content="a one-minute minigame." />

	<!-- Schema.org markup for Google+ -->
	<meta itemprop="name" content="秘密门">
	<meta itemprop="description" content="a one-minute minigame.">
	<meta itemprop="image" content="http://ncase.me/door/thumbnail.png">

	<!-- Open Graph data -->
	<meta property="og:title" content="秘密门">
	<meta property="og:type" content="website">
	<meta property="og:image" content="http://ncase.me/door/thumbnail.png">
	<meta property="og:description" content="a one-minute minigame.">
	<meta property="og:site_name" content="秘密门">
	<meta name="viewport" content="user-scalable=no"> 
	<!-- Style -->
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<style>
		#NewControl {position:fixed;right:10%;bottom:20%;width:300px;height:300px;}
		#NewControl img {width:100px;height:100px;}
		#nc_left {position:absolute;top:100px;left:0px;}
		#nc_right {position:absolute;top:100px;right:0px;}
		#nc_top {position:absolute;top:0px;left:50%;margin-left:-50px;}
		#nc_down {position:absolute;bottom:0px;left:50%;margin-left:-50px;}
		#NewControl1 {position:fixed;right:10%;bottom:20%;width:300px;height:300px;}
		#NewControl1 img {width:100px;height:100px;}
		#nc_left1 {position:absolute;top:100px;left:0px;}
		#nc_right1 {position:absolute;top:100px;right:0px;}
		#nc_top1 {position:absolute;top:0px;left:50%;margin-left:-50px;}
		#nc_down1 {position:absolute;bottom:0px;left:50%;margin-left:-50px;}

	</style>
</head>

<body  >
	<div  id="boddy" ></div>
	<div id="loading">
		<div>LOADING</div>
	</div>

	<div id="whole_container">

		<!--span style="display:none"-->
		<div id="screen_one" >      
			<div id="Newfirst">
				<img src="assets/key.gif">
			</div>
			<canvas id="canvas_intro"></canvas>
		</div>

		<div id="screen_two">
			<img class="NewSaying"  src="assets/text1.png"/>
			<img class="NewSaying"  src="assets/text2.png"/>
			<img class="NewSaying"  src="assets/text3.png"/>
			<img class="NewSaying"  src="assets/text4.png"/>
			<img class="NewSaying"  src="assets/text5.png"/>
			<div id="Newvalen">
				<div id="valentines_text"></div>
				<div id="rewind_text">回倒中...</div>
				<div id="replay_text">重映中...</div>
			</div>
			<div id="canvas_container">
				<canvas id="canvas_1" width="300" height="380"></canvas>
				<canvas id="canvas_2" width="300" height="380"></canvas>
				<canvas id="canvas_3" width="300" height="380" style="margin:0"></canvas>


			</div>
			<div id="NewButZ">
				<!-- <input type="text" id="NewInput"  placeholder="在这里输入定制文字转发给好友（可不填）"/> -->
				<div id="NewButFirend" >定制内容转发</div>
				<div id="NewButAgain" >再玩一次</div>
				<div id="NewButMore">更多好玩</div>
			</div>
		</div>
		<!--/span-->

		<div id="screen_three">

			<div id="bottom">
				<a href="https://twitter.com/ncasenmare">made by @ncasenmare</a>
				|
				<a href="https://github.com/ncase/door">open source code</a>
			</div>

			<div id="end_container">

				<span style="font-size:38px;">P.S: you can add your own personal message!</span>
				<input id="your_message" placeholder="(enter lovely message)"></input>

				<span>then just copy &amp; send this link to your lover(s):</span>
				<input id="your_link" readonly></input>

				<span>or, if you wanna send your message out to everyone:</span>
				<div id="share">
					<div id="share_facebook" onclick="return socialShare.call(this,event,'facebook');"></div>
					<div id="share_twitter" onclick="return socialShare.call(this,event,'twitter');"></div>
					<div id="share_plus" onclick="return socialShare.call(this,event,'plus');"></div>
					<div id="share_tumblr" onclick="return socialShare.call(this,event,'tumblr');"></div>
					<div id="share_reddit" onclick="return socialShare.call(this,event,'reddit');"></div>
					<div id="share_stumbleupon" onclick="return socialShare.call(this,event,'stumbleupon');"></div>
				</div>

				<span style="font-size:10px;color: #999;">
					<span style="font-size: 19px;">and lastly, if you wanna show this</span>
					<br>
					<span style="font-size: 16px;">minigame's creator some love, you can</span>
					<br>
					<a href="https://www.patreon.com/ncase" target="_blank" style="text-decoration: none;">
						<div id="support">support me on patreon</div>
					</a>
					<span style="font-size: 24px;">so I can keep making free</span>
					<br>
					<span style="font-size: 20px;">open-source playable silliness.</span>
				</span>

				<br>
				<br>

				<span style="font-size:30px">
					thanks for playing! &lt;3
				</span>

			</div>
		</div>

	</div>
</body>

</html>

<script src="js/nipplejs.js" charset="utf-8"></script>
<script src="js/Key.js"></script>
<script src="js/game.js"></script>
<script src="js/popup.js"></script>
<script src="js/soundjs-0.6.0.min.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
<script>
	var Key = {};
	var tid; var c = 0;
	var KEY_CODES = {
		37: "left", 38: "up", 39: "right", 40: "down",
		65: "left", 87: "up", 68: "right", 83: "down",
		16: "slow",
		32: "action", 13: "action",
		27: "pause", 80: "pause"
	};


	var joystickL = nipplejs.create({
		zone: document.getElementById('boddy'),
		mode: 'static',
		position: { left: '50%', bottom: '30%' },
		color: 'gray',
		size: 200
	});
	
	joystickL.on('start end',function(evt,data){
		if(evt.type=='start'){
			
		}else{
			Key['left'] = false;Key['right'] = false;Key['up'] = false;Key['down'] = false;if (window.STAGE == 4) return;
		}
	}).on('move',function(e,data){
		if(data.direction!=undefined){
			let angle =data.direction.angle;
			let distance =data.distance;
				switch(angle){
					case 'left': 
					// console.log(angle);break;			
					var code = KEY_CODES[37];Key[code] = true;Key['right'] = false;Key['up'] = false;Key['down'] = false;if (window.STAGE == 4) return;break;
					case 'right':
					// console.log(angle);break;
					var code = KEY_CODES[39];Key[code] = true;Key['left'] = false;Key['up'] = false;Key['down'] = false;if (window.STAGE == 4) return;break;
					case 'up': 
					// console.log(angle);break;			
					var code = KEY_CODES[38];Key[code] = true;Key['right'] = false;Key['left'] = false;Key['down'] = false;if (window.STAGE == 4) return;break;
					case 'down':
					// console.log(angle);break;
					var code = KEY_CODES[40];Key[code] = true;Key['right'] = false;Key['up'] = false;Key['left'] = false;if (window.STAGE == 4) return;break;
				}	
		}
	})

//STAGE = 4;
</script>